execute as @e[type=cat,tag=20w14s.cat_items.stackPart] run data merge entity @s {Health:0f,DeathTime:19s,Tags:[]}

data remove storage 20w14s:cat_items Stack[-1].Sitting

#summon amalgamation
summon cat ~ ~ ~ {ArmorItems:[{},{},{},{id:stone,Count:1b,tag:{s:0}}],Tags:["20w14s.cat_items.stackPart"],Passengers:[{id:"cat",ArmorItems:[{},{},{},{id:stone,Count:1b,tag:{s:1}}],Tags:["20w14s.cat_items.stackPart"],Passengers:[{id:"cat",ArmorItems:[{},{},{},{id:stone,Count:1b,tag:{s:2}}],Tags:["20w14s.cat_items.stackPart"],Passengers:[{id:"cat",ArmorItems:[{},{},{},{id:stone,Count:1b,tag:{s:3}}],Tags:["20w14s.cat_items.stackPart"],Passengers:[{id:"cat",ArmorItems:[{},{},{},{id:stone,Count:1b,tag:{s:4}}],Tags:["20w14s.cat_items.stackPart"],Passengers:[{id:"cat",ArmorItems:[{},{},{},{id:stone,Count:1b,tag:{s:5}}],Tags:["20w14s.cat_items.stackPart"],Passengers:[{id:"cat",ArmorItems:[{},{},{},{id:stone,Count:1b,tag:{s:6}}],Tags:["20w14s.cat_items.stackPart"],Passengers:[{id:"cat",ArmorItems:[{},{},{},{id:stone,Count:1b,tag:{s:7}}],Tags:["20w14s.cat_items.stackPart"],Passengers:[{id:"cat",ArmorItems:[{},{},{},{id:stone,Count:1b,tag:{s:8}}],Tags:["20w14s.cat_items.stackPart"],Passengers:[{id:"cat",ArmorItems:[{},{},{},{id:stone,Count:1b,tag:{s:9}}],Tags:["20w14s.cat_items.stackPart"],Passengers:[{id:"cat",ArmorItems:[{},{},{},{id:stone,Count:1b,tag:{s:10}}],Tags:["20w14s.cat_items.stackPart"],Passengers:[{id:"cat",ArmorItems:[{},{},{},{id:stone,Count:1b,tag:{s:11}}],Tags:["20w14s.cat_items.stackPart"],Passengers:[{id:"cat",ArmorItems:[{},{},{},{id:stone,Count:1b,tag:{s:12}}],Tags:["20w14s.cat_items.stackPart"],Passengers:[{id:"cat",ArmorItems:[{},{},{},{id:stone,Count:1b,tag:{s:13}}],Tags:["20w14s.cat_items.stackPart"],Passengers:[{id:"cat",ArmorItems:[{},{},{},{id:stone,Count:1b,tag:{s:14}}],Tags:["20w14s.cat_items.stackPart"],Passengers:[{id:"cat",ArmorItems:[{},{},{},{id:stone,Count:1b,tag:{s:15}}],Tags:["20w14s.cat_items.stackPart"],Passengers:[{id:"cat",ArmorItems:[{},{},{},{id:stone,Count:1b,tag:{s:16}}],Tags:["20w14s.cat_items.stackPart"],Passengers:[{id:"cat",ArmorItems:[{},{},{},{id:stone,Count:1b,tag:{s:17}}],Tags:["20w14s.cat_items.stackPart"],Passengers:[{id:"cat",ArmorItems:[{},{},{},{id:stone,Count:1b,tag:{s:18}}],Tags:["20w14s.cat_items.stackPart"],Passengers:[{id:"cat",ArmorItems:[{},{},{},{id:stone,Count:1b,tag:{s:19}}],Tags:["20w14s.cat_items.stackPart"],Passengers:[]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}]}
execute as @e[type=cat,tag=20w14s.cat_items.stackPart] store result score @s temp run data get entity @s ArmorItems[-1].tag.s
execute as @e[type=cat,tag=20w14s.cat_items.stackPart,scores={temp=0},limit=1] run function 20w14s:mobs/cat_items/new_stack_recursive
execute as @e[type=cat,tag=20w14s.cat_items.stackPart] run data merge entity @s {Health:0f,DeathTime:19s,Tags:[],ArmorItems:[]}
execute if score $mainhand temp matches 0 run replaceitem entity @a[distance=..6,tag=20w14s.catOwner] weapon.offhand air
execute if score $mainhand temp matches 1 run replaceitem entity @a[distance=..6,tag=20w14s.catOwner] weapon.mainhand air